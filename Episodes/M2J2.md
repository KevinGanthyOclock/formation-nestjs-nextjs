# CrÃ©ation dâ€™un CRUD

[Module 2 : dÃ©couverte des frameworks](../Modules/M2.md) > Jour 2

**Code source d'exemple :** Se baser sur le CURD de l'entitÃ© `Users` dans [le repo demo-nest](../Projects/demo-nest/src/users)

## DÃ©roulÃ©

### Utilisation de la CLI

â±ï¸ 30 minutes

ğŸ¯ DÃ©couvrir l'outil et montrer les capacitÃ©s / avantages

* PrÃ©sentation
  * [https://docs.nestjs.com/cli/overview](https://docs.nestjs.com/cli/overview)
  * Outils gÃ©nÃ©rant divers fichiers, pour dÃ©ployer, testerâ€¦
* Commandes principales
  * `nest new` : crÃ©ation dâ€™un nouveau projet
  * `nest start` : DÃ©marrage de lâ€™application
  * `nest generate module`
  * `nest generate controller`
  * `nest generate service`
* Parler de `nest test` et `nest generate documentation`

### EntitÃ© et TypeORM

â±ï¸ 30 minutes

ğŸ¯ Installer un ORM et dÃ©clarer une entitÃ©

* Installation de TypeORM
  * https://docs.nestjs.com/techniques/database#database
* Connexion Ã  la base de donnÃ©es MySQL
* CrÃ©ation d'une entitÃ©
  * https://docs.nestjs.com/techniques/database#repository-pattern
  * [Exemple de code](../Projects/demo-nest/src/users/user.entity.ts)

### Modules

â±ï¸ 30 minutes

ğŸ¯ DÃ©crire l'Ã©lÃ©ment et le crÃ©er en live code

* PrÃ©sentation
  * [https://docs.nestjs.com/modules](https://docs.nestjs.com/modules)
  * ApartÃ© sur SOLID
  * Avantages de la structure modulaire
* Encapsulation, organisation, rÃ©utilisation, injection de dÃ©pendances
* CrÃ©ation avec la CLI
  * [Exemple de code](../Projects/demo-nest/src/users/users.module.ts)

### Provider

â±ï¸ 30 minutes

ğŸ¯ DÃ©crire l'Ã©lÃ©ment et le crÃ©er en live code

* PrÃ©sentation
  * [https://docs.nestjs.com/providers](https://docs.nestjs.com/providers)
  * Gestion de la communication avec la BDD ou un webservice
  * Encapsulation dâ€™une logique mÃ©tier
* CrÃ©ation avec la CLI
  * [Exemple de code](../Projects/demo-nest/src/users/users.service.ts)
  
### Controller

â±ï¸ 30 minutes

ğŸ¯ DÃ©crire l'Ã©lÃ©ment et le crÃ©er en live code

* PrÃ©sentation
  * [https://docs.nestjs.com/controllers](https://docs.nestjs.com/controllers)
  * DÃ©finit les endpoints et leurs actions
* CrÃ©ation avec la CLI
  * [Exemple de code](../Projects/demo-nest/src/users/users.controller.ts)

### Tests

â±ï¸ 30 minutes

ğŸ¯ Tester le fonctionnement des routes

* Test d'un endpoint GET depuis le navigateur
* Initialisation de la solution PostMan
* CrÃ©ation dâ€™un workspace
* Environnement avec des variables
* Collection avec les requÃªtes du CRUD

### Exercice

â±ï¸ 120 minutes

ğŸ¯ ImplÃ©menter un CRUD et le tester

### Correction

â±ï¸ 120 minutes

ğŸ¯ Faire la correction de l'exercice en rÃ©pondant aux questions et en dÃ©taillant un maximum

* Montrer le CRUD generator : https://docs.nestjs.com/recipes/crud-generator
  * Cf. l'entitÃ© crÃ©Ã©e avec le gÃ©nÃ©rateur : [roles](../Projects/demo-nest/src/roles)
* Expliquer le DTO
